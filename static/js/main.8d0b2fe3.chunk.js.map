{"version":3,"sources":["store/auth/actions.ts","store/auth/reducer.ts","store/videos/actions.ts","store/videos/reducer.ts","store/rootReducer.ts","components/ui/Btn/Btn.tsx","components/User/User.tsx","components/Header/Header.tsx","components/Header/HeaderContainer.tsx","components/Search/components/Control/Control.tsx","components/Search/components/Control/ControlContainer.tsx","components/ui/ToTop/ToTop.tsx","components/Search/components/Card/Card.tsx","components/Search/components/List/List.tsx","components/Search/components/List/ListContainer.tsx","components/Loader/Loader.tsx","components/Search/Search.tsx","components/Search/SearchContainer.tsx","store/index.ts","index.tsx"],"names":["setAuthData","createAction","authData","payload","setUserData","userData","startAuth","dispatch","a","window","VK","Auth","login","response","session","user","createReducer","expire","mid","secret","sid","sig","type","state","action","setVideoData","videos","setIsLoading","status","list","isLoading","history","createBrowserHistory","appReducer","combineReducers","form","router","connectRouter","auth","rootReducer","Btn","text","onClick","color","className","Button","variant","User","handleLogin","getUserInfo","token","useEffect","id","src","photo_big","alt","Header","AppBar","position","Toolbar","Typography","withRouter","connect","states","data","user_ids","fields","name_case","v","Api","call","responseData","console","log","Control","searchVideo","sortVideo","inputEl","useRef","useState","isHDavailable","setIsHDavailable","isReverse","setIsReverse","q","hd","sort","offset","adult","longer","count","request","setRequest","length","current","focus","Input","inputRef","placeholder","onChange","event","value","target","onKeyUp","keyCode","which","FormControlLabel","control","Checkbox","checked","label","FormControl","Select","labelId","undefined","MenuItem","allVideos","items","onlyHDvideos","filter","video","width","formattedVideos","map","duration","Math","trunc","parseInt","toString","date","moment","Date","fromNow","getState","sortedVideos","slice","b","views","reverse","ToTop","scrollTo","IconButton","edge","aria-label","Card","order","href","owner_id","rel","image","url","title","List","index","key","Loader","Search","middlewares","thunk","routerMiddleware","middleWareEnhancer","applyMiddleware","store","createStore","composeWithDevTools","configureStore","App","CookiesProvider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8d0b2fe3.chunk.js","sourcesContent":["import { createAction } from '@reduxjs/toolkit';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport {Auth, User} from '@models/Auth';\nimport { ApplicationState } from '@store/rootReducer';\n\ndeclare global {\n  interface Window {\n    VK: any;\n  }\n}\n\ntype AuthResponse = {\n  session: Auth;\n  status: string;\n};\n\nexport const setAuthData = createAction('SET_AUTH_DATA', (authData: Auth) => ({\n  payload: authData,\n}));\n\nexport const setUserData = createAction('SET_USER_DATA', (userData: User) => ({\n  payload: userData,\n}));\n\nexport function startAuth() {\n  return async (dispatch: ThunkDispatch<ApplicationState, void, Action>) => {\n    const { VK }: Window = window;\n\n    VK.Auth.login(\n      (response: AuthResponse) =>\n        response.session ? dispatch(setAuthData(response.session)) : null,\n      16,\n    ); //  код 16 - запрос прав на доступ к video\n  };\n}\n\nexport function getUserInfo(id: string) {\n  return async (dispatch: ThunkDispatch<ApplicationState, void, Action>) => {\n    const { VK }: Window = window;\n    const data = {\n      user_ids: id,\n      fields: 'photo_big',\n      name_case: 'Nom',\n      v: '5.126'\n    };\n    VK.Api.call('users.get', data, (responseData: any) => {\n      console.log(responseData.response[0]);\n      responseData.response[0] && dispatch(setUserData(responseData.response[0]))\n    });\n  }\n}\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { Auth } from '@models/Auth';\nimport { setAuthData, setUserData } from './actions';\n\nconst initialState: Auth = {\n  expire: null,\n  mid: null,\n  secret: null,\n  sid: null,\n  sig: null,\n  user: null,\n};\n\nconst user = createReducer(initialState, {\n  [setAuthData.type]: (state, action: ReturnType<typeof setAuthData>) => ({\n    ...state,\n    ...action.payload,\n  }),\n  [setUserData.type]: (state, action: ReturnType<typeof setUserData>) => ({\n    ...state,\n    user: {...state.user, ...action.payload},\n  }),\n});\n\nexport default user;\n","import { ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport moment from 'moment';\nimport { createAction } from '@reduxjs/toolkit';\n\nimport { ApplicationState } from '@store/rootReducer';\nimport { Video } from '@models/Video';\nimport { Request } from '@components/Search/components/Control/Control';\n\ntype ResponseType = {\n  response: {\n    items: Video[];\n  };\n};\n\nexport const setVideoData = createAction('SET_VIDEO_DATA', (videos: Video[]) => ({\n  payload: videos,\n}));\n\nexport const setIsLoading = createAction('SET_IS_LOADING', (status: boolean) => ({\n  payload: status,\n}));\n\nexport function searchVideo(request: Request, isHDavailable: boolean) {\n  return async (dispatch: ThunkDispatch<ApplicationState, void, Action>) => {\n    const { VK }: Window = window;\n\n    dispatch(setIsLoading(true))\n\n    VK.Api.call('video.search', request, (responseData: ResponseType) => {\n      const allVideos = responseData.response.items;\n      const onlyHDvideos = isHDavailable\n        ? allVideos\n        : allVideos.filter((video: Video) => video.width === 1920);\n      console.log(onlyHDvideos);\n      const formattedVideos = onlyHDvideos.map((video: Video) => ({\n        ...video,\n        duration: `${Math.trunc(parseInt(video.duration.toString(), 10) / 60)}:${parseInt(\n          video.duration.toString(),\n          10,\n        ) % 60}`,\n        date:\n          typeof video.date === 'number'\n            ? moment(new Date(video.date * 1000).toString()).fromNow()\n            : video.date,\n      }));\n\n      dispatch(setVideoData(formattedVideos));\n      dispatch(setIsLoading(false))\n    });\n  };\n}\n\nexport function sortVideo(isReverse: boolean | undefined) {\n  return async (\n    dispatch: ThunkDispatch<ApplicationState, void, Action>,\n    getState: () => ApplicationState,\n  ) => {\n    const videos: Video[] = getState().videos.list;\n    let sortedVideos: Video[] = [];\n    if (!isReverse && videos.length)\n      sortedVideos = videos.slice().sort((a: Video, b: Video) => b.views - a.views);\n\n    if (isReverse) sortedVideos = videos.slice().reverse();\n\n    dispatch(setVideoData(sortedVideos));\n  };\n}\n","import { createReducer } from '@reduxjs/toolkit';\nimport { Video } from '@models/Video';\nimport { setVideoData, setIsLoading } from './actions';\n\ntype VideoState = {\n  list: Video[] | [];\n  isLoading: boolean;\n};\n\nconst initialState: VideoState = {\n  list: [],\n  isLoading: false,\n};\n\nconst videos = createReducer(initialState, {\n  [setVideoData.type]: (state, action: ReturnType<typeof setVideoData>) => ({\n    ...state,\n    list: [...action.payload],\n  }),\n  [setIsLoading.type]: (state, action: ReturnType<typeof setIsLoading>) => ({\n    ...state,\n    isLoading: action.payload,\n  }),\n});\n\nexport default videos;\n","import { combineReducers } from 'redux';\nimport { connectRouter } from 'connected-react-router';\nimport { reducer as form } from 'redux-form';\nimport { createBrowserHistory } from 'history';\n\nimport auth from './auth/reducer';\nimport videos from './videos/reducer';\n\nexport const history = createBrowserHistory();\n\nexport type ApplicationState = ReturnType<typeof rootReducer>;\n\nconst appReducer = combineReducers({\n  form,\n  router: connectRouter(history),\n  auth,\n  videos,\n});\n\nconst rootReducer = (state: any, action: any) => appReducer(state, action);\n\nexport default rootReducer;\n","import React from 'react';\nimport Button, { ButtonProps } from '@material-ui/core/Button';\n\ntype BtnProps = ButtonProps & {\n  text: string;\n};\n\nconst Btn: React.FC<BtnProps> = ({ text, onClick, color, className }) => (\n  <Button variant=\"contained\" color={color} onClick={onClick} className={className}>\n    {text}\n  </Button>\n);\n\nexport default Btn;\n","import React, { useEffect } from 'react';\nimport Btn from '@components/ui/Btn/Btn';\nimport { User as UserType } from '@models/Auth';\nimport  './styles.scss';\n\ntype UserProps = {\n  user: UserType | null;\n  token: string | null;\n  handleLogin: () => void;\n  getUserInfo: (id: string) => void;\n};\n\nconst User: React.FC<UserProps> = ({ handleLogin, getUserInfo, user, token }) => {\n  useEffect(() => {\n    handleLogin();\n  }, []);\n\n  useEffect(() => {\n    token && user && getUserInfo(user.id)\n  },[token]);\n  return (\n    <>\n      {!token && <Btn text=\"Login\" color=\"secondary\" onClick={handleLogin} />}\n      {token && user && (\n        <img className=\"user__img\" src={user.photo_big} alt=\"ava\"/>\n      )}\n    </>\n  );\n};\nexport default User;\n","import React from 'react';\nimport { AppBar, Toolbar, Typography } from '@material-ui/core';\nimport User from '@components/User/User';\nimport { HeaderProps } from './HeaderContainer';\n\nimport './Header.scss';\n\nconst Header: React.FC<HeaderProps> = ({ startAuth, getUserInfo, token, user }) => (\n  <AppBar position=\"fixed\">\n    <Toolbar>\n      <Typography variant=\"h6\">Searching Videos</Typography>\n      <div className=\"header__user\">\n        <User getUserInfo={getUserInfo} handleLogin={startAuth} user={user} token={token} />\n      </div>\n    </Toolbar>\n  </AppBar>\n);\n\nexport default Header;\n","import { connect } from 'react-redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\n\nimport { startAuth, getUserInfo } from '@store/auth/actions';\n\nimport { ApplicationState } from '@store/rootReducer';\nimport { User } from '@models/Auth';\n\nimport Header from './Header';\n\ntype HeaderOwnProps = RouteComponentProps & {};\n\ntype DispatchProps = {\n  startAuth: () => void;\n  getUserInfo: (id: string) => void;\n};\n\ntype StateProps = {\n  user: User | null,\n  token: string | null,\n};\nexport type HeaderProps = StateProps & HeaderOwnProps & DispatchProps;\n\nconst mapStateToProps = (states: ApplicationState):  StateProps => ({\n  user: states.auth.user,\n  token: states.auth.sid,\n});\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<{}, {}, any>): DispatchProps => ({\n  startAuth: () => dispatch(startAuth()),\n  getUserInfo: (id: string) => dispatch(getUserInfo(id)),\n});\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(Header),\n);\n","import React, { ChangeEvent, KeyboardEvent, useState, useEffect, useRef } from 'react';\nimport {\n  Input,\n  Checkbox,\n  FormControlLabel,\n  FormControl,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\nimport { ControlProps } from './ControlContainer';\n\nimport './Control.scss';\nimport Btn from '@components/ui/Btn/Btn';\n\nexport type Request = {\n  q: string;\n  hd: number;\n  sort: number;\n  offset: number;\n  adult: number;\n  longer: number;\n  shorter?: number;\n  count: number;\n  v: '5.103';\n};\n\nconst Control: React.FC<ControlProps> = ({ searchVideo, sortVideo }) => {\n  const inputEl = useRef<HTMLInputElement>(null);\n  const [isHDavailable, setIsHDavailable] = useState<boolean>(false);\n  const [isReverse, setIsReverse] = useState<boolean>(false);\n  const [request, setRequest] = useState<Request>({\n    q: '',\n    hd: 1,\n    sort: 0,\n    offset: 0,\n    adult: 1,\n    longer: 60 * 9,\n    // shorter: 60 * 15,\n    count: 200,\n    v: '5.103',\n  });\n\n  const handleChange = (event: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const {\n      target: { value },\n    } = event;\n\n    if (value) setRequest({ ...request, q: value });\n  };\n\n  const handleSearch = (event: KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const keyCode = event.keyCode || event.which;\n\n    if (keyCode === 13) searchVideo(request, isHDavailable);\n  };\n\n  const handleSelect = (event: ChangeEvent<{ value: unknown }>) => {\n    const {\n      target: { value },\n    } = event;\n\n    if (value === 3) {\n      sortVideo(undefined);\n      return;\n    }\n\n    setRequest({ ...request, sort: value as number });\n  };\n\n  useEffect(() => {\n    sortVideo(isReverse);\n  }, [isReverse]);\n\n  useEffect(() => {\n    if (request.q.length > 1) searchVideo(request, isHDavailable);\n  }, [request.offset]);\n\n  useEffect(() => {\n    if (inputEl && inputEl.current) {\n      inputEl.current.focus();\n    }\n  }, []);\n\n  return (\n    <div className=\"control\">\n      <Input\n        inputRef={inputEl}\n        placeholder=\"searching request\"\n        onChange={handleChange}\n        onKeyUp={handleSearch}\n        className=\"control__item\"\n      />\n      <FormControlLabel\n        className=\"control__item\"\n        control={\n          <Checkbox\n            checked={isHDavailable}\n            onChange={event => setIsHDavailable(event.target.checked)}\n          />\n        }\n        label=\"Including 720p\"\n      />\n      <FormControlLabel\n        className=\"control__item\"\n        control={\n          <Checkbox checked={isReverse} onChange={event => setIsReverse(event.target.checked)} />\n        }\n        label=\"Reverse\"\n      />\n      <FormControl className=\"control__item\">\n        <Select\n          labelId=\"demo-simple-select-label\"\n          id=\"demo-simple-select\"\n          value={request.sort}\n          onChange={handleSelect}\n        >\n          <MenuItem value={0}>по дате добавления видеозаписи</MenuItem>\n          <MenuItem value={1}>по длительности</MenuItem>\n          <MenuItem value={2}>по релевантности</MenuItem>\n          <MenuItem value={3}>по кол-ву просмотров</MenuItem>\n        </Select>\n      </FormControl>\n      <Btn\n        className=\"control__item _btn\"\n        text=\"+200 more\"\n        color=\"secondary\"\n        onClick={() => setRequest({ ...request, offset: request.offset + 200 })}\n      />\n    </div>\n  );\n};\n\nexport default Control;\n","import { connect } from 'react-redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\n\nimport { searchVideo, sortVideo } from '@store/videos/actions';\n\n// import { ApplicationState } from '@store/rootReducer';\n\nimport Control, { Request } from './Control';\n\ntype ControlOwnProps = RouteComponentProps & {};\n\ntype DispatchProps = {\n  searchVideo: (request: Request, isHDavailable: boolean) => void;\n  sortVideo: (isReverse: boolean | undefined) => void;\n};\n\ntype StateProps = {};\nexport type ControlProps = StateProps & ControlOwnProps & DispatchProps;\n\nconst mapStateToProps = (/* states: ApplicationState */): StateProps => ({});\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<{}, {}, any>): DispatchProps => ({\n  searchVideo: (request: Request, isHDavailable: boolean) =>\n    dispatch(searchVideo(request, isHDavailable)),\n  sortVideo: (isReverse: boolean | undefined) => dispatch(sortVideo(isReverse)),\n});\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Control));\n","import React from 'react';\n\nimport './ToTop.scss';\nimport { IconButton } from '@material-ui/core';\nimport PublishIcon from '@material-ui/icons/Publish';\n\nconst ToTop: React.FC = () => (\n  <div className=\"totop\" onClick={() => window.scrollTo(0, 0)}>\n    <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\">\n      <PublishIcon />\n    </IconButton>\n  </div>\n);\n\nexport default ToTop;\n","import React from 'react';\n\nimport { Video } from '@models/Video';\n\nimport './Card.scss';\n\ntype CardProps = {\n  video: Video;\n  order: number;\n};\n\nconst Card: React.FC<CardProps> = ({ video, order }: CardProps) => (\n  <li className=\"card\">\n    <a\n      className=\"card__link\"\n      href={`https://vk.com/video${video.owner_id}_${video.id}`}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n    >\n      {video.image && (\n        <img className=\"card__img\" src={video.image[3].url} alt=\"bla\" />\n      )}\n      <span className=\"card__container\">\n        <p className=\"card__text\">{video.date}</p>\n        <p className=\"card__text\">{video.duration}</p>\n        <p className=\"card__text\">{video.views}</p>\n      </span>\n      <p className=\"card__title\">{video.title}</p>\n      <p className=\"card__order\">{order}</p>\n    </a>\n  </li>\n);\n\nexport default Card;\n","import React from 'react';\n\nimport { Video } from '@models/Video';\nimport { ListProps } from './ListContainer';\n\nimport ToTop from '@components/ui/ToTop/ToTop';\nimport Card from '../Card/Card';\n\nimport './List.scss';\n\nconst List: React.FC<ListProps> = ({ videos }: ListProps) => (\n  <>\n    <ul className=\"list\">\n      {videos.map((video: Video, index: number) => (\n        <Card video={video} key={`${video.id}_${video.owner_id}`} order={index + 1} />\n      ))}\n    </ul>\n    {!!videos.length && <ToTop />}\n  </>\n);\n\nexport default List;\n","import { connect } from 'react-redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\n\nimport { startAuth } from '@store/auth/actions';\n\nimport { ApplicationState } from '@store/rootReducer';\nimport {Video} from '@models/Video';\n\nimport List from './List';\n\ntype ListOwnProps = RouteComponentProps & {};\n\ntype DispatchProps = {};\n\ntype StateProps = {\n  videos: Video[];\n};\nexport type ListProps = StateProps & ListOwnProps & DispatchProps;\n\nconst mapStateToProps = (states: ApplicationState ): StateProps => ({\n  videos: states.videos.list\n});\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<{}, {}, any>): DispatchProps => ({\n  startAuth: () => dispatch(startAuth()),\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(List));\n","import React from 'react';\n\nimport './Loader.scss';\n\ntype LoaderProps = {};\n\nconst Loader: React.FC<LoaderProps> = () => (\n  <div className=\"loader\">\n    <div className=\"lds-facebook\">\n      <div />\n      <div />\n      <div />\n    </div>\n  </div>\n);\n\nexport default Loader;\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport Header from '@components/Header/HeaderContainer';\nimport Control from './components/Control/ControlContainer';\nimport List from '@components/Search/components/List/ListContainer';\n\nimport { SearchProps } from './SearchContainer';\n\nimport './Search.scss';\nimport Loader from '@components/Loader/Loader';\n\nconst Search: React.FC<SearchProps> = ({ token, isLoading }) => (\n  <main className=\"search\">\n    <Header />\n    <div className=\"search__content\">\n      {token && (\n        <>\n          <Control />\n          <div className=\"search__list\">\n            {!isLoading && <List />}\n            {isLoading && <Loader />}\n          </div>\n        </>\n      )}\n      {!token && <Typography>Вы не авторизованы, необходимо авторизоваться Вконтакте</Typography>}\n    </div>\n  </main>\n);\n\nexport default Search;\n","import { connect } from 'react-redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\n\nimport { ApplicationState } from '@store/rootReducer';\nimport { startAuth } from '@store/auth/actions';\n\nimport Search from './Search';\n\ntype SearchOwnProps = RouteComponentProps & {};\n\ntype DispatchProps = {\n  startAuth: () => void;\n};\n\ntype StateProps = {\n  token: string | null;\n  isLoading: boolean;\n};\n\nexport type SearchProps = StateProps & SearchOwnProps & DispatchProps;\n\nconst mapStateToProps = (states: ApplicationState): StateProps => ({\n  token: states.auth.sid,\n  isLoading: states.videos.isLoading\n});\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<{}, {}, any>): DispatchProps => ({\n  startAuth: () => dispatch(startAuth()),\n});\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(Search),\n);\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { routerMiddleware } from 'connected-react-router';\nimport thunk from 'redux-thunk';\nimport rootReducer, { history } from './rootReducer';\n\nexport type AppState = ReturnType<typeof rootReducer>;\nexport type StoreConfig = ReturnType<typeof configureStore>;\n\nexport default function configureStore() {\n  // const sagaMiddleware = createSagaMiddleware();\n  const middlewares = [thunk, routerMiddleware(history)];\n  const middleWareEnhancer = applyMiddleware(...middlewares);\n\n  const store = createStore(rootReducer, {}, composeWithDevTools(middleWareEnhancer));\n\n  // rootSagas.forEach(sagaMiddleware.run);\n\n  return { store, history };\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { CookiesProvider } from 'react-cookie';\n\nimport configureStore from '@store/index';\nimport Search from '@components/Search/SearchContainer';\n\nimport 'normalize.css';\nimport './index.css';\n\n// Main style file\nimport '@styles/index.scss';\n\nexport const { store, history } = configureStore();\n\nconst App: React.FC = () => (\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <CookiesProvider>\n        <section className=\"app\">\n          <Search />\n        </section>\n      </CookiesProvider>\n    </ConnectedRouter>\n  </Provider>\n);\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}